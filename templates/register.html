{% extends "layout.html" %}

{% block title %}
    Register
{% endblock %}

{% block main %}
    <h2>Register</h2>
    <form action="/register" method="post" class="row col-4 text-start mx-auto">
        <div class="mb-3">
            <label for="username" class="form-label">User name</label>
            <input type="text" class="form-control" id="username" name ="username" required>
            {% if username_error %} <span style="line-height: 1em; font-size: 0.75em; color:red">{{ username_error }}</span> {% endif %}
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" name="email" minlength="6" required>
        </div>
        <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control" id="password" name="password" required>
        </div>
        <div class="mb-3">
            <label for="confirmation" class="form-label">Confirm password</label>
            <input type="password" class="form-control" id="confirmation" name="confirmation" required>
            {% if confirmation_error %} <span style="line-height: 1em; font-size: 0.75em; color:red">{{ confirmation_error }}</span> {% endif %}
        </div>
        <div class="text-center">
            <button class="btn btn-secondary " id="register" type="submit">Register</button>
        </div>
    </form>

    <script>
        """Restore input values after page reload"""
        // Get the text fields that we're going to track
        let username = document.getElementById("username");
        let email = document.getElementById("email");

        // See if we have saved values and restore the contents
        if (sessionStorage.getItem("username_save")) {
        username.value = sessionStorage.getItem("username_save");
        }
        if (sessionStorage.getItem("email_save")) {
        email.value = sessionStorage.getItem("email_save");
        }

        // Listen for changes in the text fields and save the contents
        username.addEventListener("change", () => {
        sessionStorage.setItem("username_save", username.value);
        });
        email.addEventListener("change", () => {
        sessionStorage.setItem("email_save", email.value);
        });
    </script>

{% endblock %}
